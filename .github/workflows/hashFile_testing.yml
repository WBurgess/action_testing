name: HashFile Testing

on:
  workflow_dispatch:

jobs:
  hashFile:
    name: Create some files with data and serve up some hash browns
    runs-on: ubuntu-latest
    steps:
        - name: Create some files with data
          run: |
            mkdir apps/base/cypress/videos
            touch apps/base/cypress/videos/file1-compressed.mp4

        - name: Hash test - success
          if: ${{ hashFiles('hashTest/file1.txt') != '' }}
          run: echo "SUCCESS"

        - name: Hash test - fail
          run: |
            if find apps/base/cypress/videos -type f ! -name '*-compressed.mp4' -name '*.mp4' 2>/dev/null | grep -q .; then
                echo "FOUND"
            else
                echo "No non-compressed videos found, skipping upload"
            fi
